# Release Drafter configuration
# See: https://github.com/release-drafter/release-drafter

name-template: 'v$RESOLVED_VERSION'
tag-template: 'v$RESOLVED_VERSION'

# Categories for organizing release notes
categories:
  - title: 'ğŸ”¥ Breaking Changes'
    labels:
      - 'ğŸ”¥ breaking'
  - title: 'ğŸš€ New Features'
    labels:
      - 'ğŸš€ feature'
  - title: 'ğŸ“¦ Package System'
    labels:
      - 'ğŸ“¦ packages'
  - title: 'ğŸ› Bug Fixes'
    labels:
      - 'ğŸ› bug'
  - title: 'âš¡ Performance Improvements'
    labels:
      - 'âš¡ performance'
  - title: 'ğŸ“ Documentation'
    labels:
      - 'ğŸ“ docs'
  - title: 'ğŸ§ª Testing'
    labels:
      - 'ğŸ§ª tests'
  - title: 'ğŸ”§ Configuration & Maintenance'
    labels:
      - 'ğŸ”§ config'

# Version resolver: how to bump version numbers
version-resolver:
  major:
    labels:
      - 'ğŸ”¥ breaking'
  minor:
    labels:
      - 'ğŸš€ feature'
  patch:
    labels:
      - 'ğŸ› bug'
      - 'ğŸ“ docs'
      - 'ğŸ§ª tests'
      - 'ğŸ”§ config'
      - 'âš¡ performance'
      - 'ğŸ“¦ packages'
  default: patch

# Change template for each PR entry
change-template: '- $TITLE @$AUTHOR (#$NUMBER)'
change-title-escapes: '\<*_&'

# Template for the release notes body
template: |
  ## What's Changed

  $CHANGES

  ## New Contributors

  $CONTRIBUTORS

  **Full Changelog**: https://github.com/$OWNER/$REPOSITORY/compare/$PREVIOUS_TAG...v$RESOLVED_VERSION

# Exclude certain labels from appearing in the changelog
exclude-labels:
  - 'skip-changelog'
  - 'duplicate'
  - 'invalid'
  - 'wontfix'

# Exclude contributors
exclude-contributors:
  - 'dependabot'
  - 'dependabot[bot]'

# Autolabeler rules (applied when PRs are created)
autolabeler:
  - label: 'ğŸ“ docs'
    files:
      - 'docs/**/*'
      - '*.md'
  - label: 'ğŸ§ª tests'
    files:
      - 'tests/**/*'
  - label: 'ğŸ”§ config'
    files:
      - 'composer.json'
      - 'phpstan.neon'
      - 'phpcs.xml'
      - '.github/**/*'
  - label: 'ğŸ“¦ packages'
    files:
      - 'src/Packages/**/*'
  - label: 'ğŸš€ feature'
    files:
      - 'src/Actions/**/*'
      - 'src/Conditions/**/*'
    branch:
      - '/^feature\/.+/'
      - '/^feat\/.+/'
  - label: 'ğŸ› bug'
    branch:
      - '/^fix\/.+/'
      - '/^bugfix\/.+/'
      - '/^hotfix\/.+/'
  - label: 'ğŸ“ docs'
    branch:
      - '/^docs?\/.+/'
  - label: 'ğŸ”¥ breaking'
    title:
      - '/^break(ing)?(\(.*\))?!:/'
      - '/^BREAKING CHANGE:/'
    body:
      - '/BREAKING CHANGE:/'

# Replacers for manipulating text in the release notes
replacers:
  # Standardize PR title formats
  - search: '/^(feat|feature)(\(.*\))?:/i'
    replace: 'ğŸš€'
  - search: '/^fix(\(.*\))?:/i'
    replace: 'ğŸ›'
  - search: '/^docs?(\(.*\))?:/i'
    replace: 'ğŸ“'
  - search: '/^test(\(.*\))?:/i'
    replace: 'ğŸ§ª'
  - search: '/^chore(\(.*\))?:/i'
    replace: 'ğŸ”§'
  - search: '/^perf(\(.*\))?:/i'
    replace: 'âš¡'
  - search: '/^refactor(\(.*\))?:/i'
    replace: 'â™»ï¸'
  - search: '/^style(\(.*\))?:/i'
    replace: 'ğŸ’'
